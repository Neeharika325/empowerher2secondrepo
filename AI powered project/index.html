<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Daily Time Tracker - AI-Powered Analytics</title>
    <link rel="stylesheet" href="styles.css">
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.7.0/firebase-firestore.js"></script>
    <!-- Chart.js for analytics -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
    <!-- Auth Screen -->
    <div id="authScreen" class="auth-container">
        <div class="auth-card">
            <div class="auth-header">
                <h1>Daily Time Tracker</h1>
                <p>Track activities & analyze your 24-hour usage</p>
            </div>
            
            <div class="auth-forms">
                <!-- Sign In Form -->
                <div id="signInForm" class="auth-form active">
                    <h2>Sign In</h2>
                    <input type="email" id="signInEmail" placeholder="Email address" class="input-field">
                    <input type="password" id="signInPassword" placeholder="Password" class="input-field">
                    <button id="signInBtn" class="btn btn-primary">Sign In</button>
                    <button id="googleSignInBtn" class="btn btn-secondary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                        </svg>
                        Sign In with Google
                    </button>
                    <p class="auth-toggle">Don't have an account? <a href="#" onclick="toggleAuthForm(event)">Sign Up</a></p>
                </div>

                <!-- Sign Up Form -->
                <div id="signUpForm" class="auth-form">
                    <h2>Create Account</h2>
                    <input type="email" id="signUpEmail" placeholder="Email address" class="input-field">
                    <input type="password" id="signUpPassword" placeholder="Password (min 6 chars)" class="input-field">
                    <input type="password" id="signUpConfirm" placeholder="Confirm password" class="input-field">
                    <button id="signUpBtn" class="btn btn-primary">Sign Up</button>
                    <button id="googleSignUpBtn" class="btn btn-secondary">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <circle cx="12" cy="12" r="10"></circle>
                        </svg>
                        Sign Up with Google
                    </button>
                    <p class="auth-toggle">Already have an account? <a href="#" onclick="toggleAuthForm(event)">Sign In</a></p>
                </div>
            </div>

            <div id="authError" class="error-message"></div>
        </div>
    </div>

    <!-- Main App Screen -->
    <div id="appScreen" class="app-container hidden">
        <!-- Header -->
        <header class="app-header">
            <div class="header-content">
                <h1>Daily Time Tracker</h1>
                <div class="header-actions">
                    <span id="userEmail" class="user-email"></span>
                    <button id="signOutBtn" class="btn btn-small">Sign Out</button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="app-main">
            <!-- Activity Tracker Section -->
            <section id="trackerSection" class="tracker-section">
                <div class="tracker-card">
                    <!-- Date Picker -->
                    <div class="date-selector">
                        <button id="prevDateBtn" class="btn-icon">← Prev</button>
                        <input type="date" id="dateInput" class="date-input">
                        <button id="nextDateBtn" class="btn-icon">Next →</button>
                    </div>

                    <!-- Remaining Minutes Display -->
                    <div class="minutes-display">
                        <div class="minutes-stat">
                            <span class="minutes-label">Remaining Minutes</span>
                            <span id="remainingMinutes" class="minutes-value">1440</span>
                        </div>
                        <div class="progress-bar">
                            <div id="usageProgress" class="progress-fill"></div>
                        </div>
                    </div>

                    <!-- Add Activity Form -->
                    <div class="add-activity">
                        <h3>Add Activity</h3>
                        <div class="form-row">
                            <input type="text" id="activityTitle" placeholder="Activity title (e.g., Work, Exercise)" class="input-field flex-1">
                            <input type="number" id="activityMinutes" placeholder="Minutes" min="1" max="1440" class="input-field flex-2">
                        </div>
                        <div class="form-row">
                            <select id="activityCategory" class="input-field flex-1">
                                <option value="">Category (optional)</option>
                                <option value="Work">Work</option>
                                <option value="Exercise">Exercise</option>
                                <option value="Leisure">Leisure</option>
                                <option value="Sleep">Sleep</option>
                                <option value="Meals">Meals</option>
                                <option value="Travel">Travel</option>
                                <option value="Health">Health</option>
                                <option value="Other">Other</option>
                            </select>
                            <button id="addActivityBtn" class="btn btn-primary">Add Activity</button>
                        </div>
                    </div>

                    <!-- Activities List -->
                    <div class="activities-list">
                        <h3>Activities for <span id="selectedDate"></span></h3>
                        <div id="activitiesContainer" class="activities">
                            <!-- Activities rendered here -->
                        </div>
                    </div>

                    <!-- Analyse Button -->
                    <div class="analyze-section">
                        <button id="analyzeBtn" class="btn btn-primary btn-large" disabled>
                            Analyze Dashboard
                        </button>
                    </div>
                </div>
            </section>

            <!-- Dashboard Section (Hidden by default) -->
            <section id="dashboardSection" class="dashboard-section hidden">
                <div class="dashboard-card">
                    <button id="backToDayBtn" class="btn btn-small">← Back to Day</button>
                    
                    <!-- No Data State -->
                    <div id="noDataState" class="no-data-state">
                        <svg class="no-data-illustration" viewBox="0 0 200 200" xmlns="http://www.w3.org/2000/svg">
                            <circle cx="100" cy="100" r="90" fill="none" stroke="currentColor" stroke-width="2" opacity="0.2"/>
                            <path d="M 70 80 Q 100 120 130 80" fill="none" stroke="currentColor" stroke-width="3" stroke-linecap="round"/>
                            <circle cx="80" cy="70" r="4" fill="currentColor"/>
                            <circle cx="120" cy="70" r="4" fill="currentColor"/>
                            <text x="100" y="160" text-anchor="middle" font-size="14" fill="currentColor" opacity="0.6">
                                No activities yet
                            </text>
                        </svg>
                        <h2>No Activities Logged</h2>
                        <p>Start adding activities to see your analytics dashboard</p>
                    </div>

                    <!-- Dashboard Content -->
                    <div id="dashboardContent" class="dashboard-content hidden">
                        <div class="dashboard-header">
                            <h2>Analytics Dashboard</h2>
                            <span id="dashboardDate" class="dashboard-date"></span>
                        </div>

                        <!-- Summary Stats -->
                        <div class="stats-grid">
                            <div class="stat-card">
                                <span class="stat-label">Total Hours</span>
                                <span id="totalHours" class="stat-value">0h</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Activities</span>
                                <span id="totalActivities" class="stat-value">0</span>
                            </div>
                            <div class="stat-card">
                                <span class="stat-label">Categories</span>
                                <span id="totalCategories" class="stat-value">0</span>
                            </div>
                        </div>

                        <!-- Charts -->
                        <div class="charts-grid">
                            <div class="chart-container">
                                <h3>Time by Category</h3>
                                <canvas id="pieChart"></canvas>
                            </div>
                            <div class="chart-container">
                                <h3>Activity Durations</h3>
                                <canvas id="barChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
        </main>
    </div>

    <!-- Notifications -->
    <div id="notification" class="notification"></div>

    <script src="app.js"></script>
</body>
</html>
